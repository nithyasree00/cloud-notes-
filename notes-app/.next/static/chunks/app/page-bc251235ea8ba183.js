(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6327:function(e,t,n){Promise.resolve().then(n.bind(n,2327))},2327:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(7437),s=n(2265),a=n(4752),i=n(7293);function c(){let[e,t]=(0,s.useState)(null),[n,r]=(0,s.useState)(!0);return(0,s.useEffect)(()=>(0,a.Aj)(i.I,e=>{t(e),r(!1)}),[]),{user:e,loading:n}}function l(){let{user:e,loading:t}=c();return t?(0,r.jsx)("div",{children:"Loading..."}):e?(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:["Welcome, ",e.displayName,"!"]}),(0,r.jsx)("button",{onClick:()=>(0,a.w7)(i.I),children:"Sign Out"})]}):(0,r.jsx)("button",{onClick:()=>(0,a.rh)(i.I,i.A),children:"Sign In with Google"})}var d=n(5978);function o(e){let{onSelectNote:t}=e,{user:n}=c(),[a,l]=(0,s.useState)([]);return(0,s.useEffect)(()=>{if(n)return function(e,t){let n=(0,d.IO)((0,d.hJ)(i.db,"users/".concat(e,"/notes")),(0,d.Xo)("updatedAt","desc"));return(0,d.cf)(n,e=>t(e.docs.map(e=>({id:e.id,...e.data()}))))}(n.uid,l)},[n]),(0,r.jsx)("div",{children:a.map(e=>(0,r.jsxs)("div",{onClick:()=>t(e),children:[(0,r.jsx)("h3",{children:e.title}),(0,r.jsxs)("p",{children:[e.body.substring(0,100),"..."]})]},e.id))})}async function u(e,t,n){return(0,d.r7)((0,d.JU)(i.db,"users/".concat(e,"/notes/").concat(t)),{...n,updatedAt:(0,d.Bt)()})}function h(e){let{note:t,onSave:n}=e,[a,c]=(0,s.useState)(t.title),[l,d]=(0,s.useState)(t.body),[o,h]=(0,s.useState)(t.shared||!1),[x,p]=(0,s.useState)(t.shareExpiresAt?new Date(t.shareExpiresAt.toDate()).toISOString().slice(0,16):"");(0,s.useEffect)(()=>{c(t.title),d(t.body),h(t.shared||!1),p(t.shareExpiresAt?new Date(t.shareExpiresAt.toDate()).toISOString().slice(0,16):"")},[t]);let f=async()=>{let e=i.I.currentUser;if(!e){alert("Please sign in first");return}await u(e.uid,t.id,{title:a,body:l,shared:o,expiresAt:o?x:null}),n(),alert("Note saved!")};return(0,r.jsxs)("div",{className:"p-4 border rounded space-y-2",children:[(0,r.jsx)("input",{type:"text",value:a,onChange:e=>c(e.target.value),placeholder:"Note Title",className:"w-full p-2 border rounded"}),(0,r.jsx)("textarea",{value:l,onChange:e=>d(e.target.value),placeholder:"Note Body",className:"w-full p-2 border rounded h-40"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("label",{className:"flex items-center space-x-1",children:[(0,r.jsx)("input",{type:"checkbox",checked:o,onChange:e=>h(e.target.checked)}),(0,r.jsx)("span",{children:"Share publicly"})]}),o&&(0,r.jsx)("input",{type:"datetime-local",value:x,onChange:e=>p(e.target.value),className:"p-1 border rounded"})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:f,className:"px-3 py-1 bg-blue-500 text-white rounded",children:"Save"}),o&&(0,r.jsx)("button",{onClick:()=>{let e=i.I.currentUser;if(!e){alert("Please sign in first");return}if(!o){alert("Enable sharing first!");return}let n="".concat(window.location.origin,"/notes/shared/").concat(e.uid,"/").concat(t.id);navigator.clipboard.writeText(n),alert("Share link copied!")},className:"px-3 py-1 bg-green-500 text-white rounded",children:"Copy Share Link"})]})]})}async function x(e){return(0,d.ET)((0,d.hJ)(i.db,"users/".concat(e,"/notes")),{title:"Untitled",body:"",tags:[],shared:!1,createdAt:(0,d.Bt)(),updatedAt:(0,d.Bt)()})}function p(){let{user:e}=c(),[t,n]=(0,s.useState)(null),a=async()=>{e&&n({id:(await x(e.uid)).id,title:"Untitled",body:""})};return(0,r.jsxs)("div",{children:[(0,r.jsx)(l,{}),e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:a,children:"New Note"}),(0,r.jsx)(o,{onSelectNote:n}),t&&(0,r.jsx)(h,{note:t,onSave:()=>{}})]})]})}},7293:function(e,t,n){"use strict";n.d(t,{A:function(){return l},I:function(){return c},db:function(){return d}});var r=n(738),s=n(4752),a=n(5978);let i=(0,r.ZF)({apiKey:"AIzaSyB0nBLESGKPTw0-daVyx56VpulbuBElxz4",authDomain:"cloud--based-note-taking.firebaseapp.com",projectId:"cloud--based-note-taking"}),c=(0,s.v0)(i),l=new s.hJ,d=(0,a.ad)(i)}},function(e){e.O(0,[358,315,714,971,117,744],function(){return e(e.s=6327)}),_N_E=e.O()}]);